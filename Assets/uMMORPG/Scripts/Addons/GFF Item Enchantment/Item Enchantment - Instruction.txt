Thank you for your purchase. 
Our other projects you can see https://assetstore.unity.com/publishers/37837
We are waiting for your feedback on asset store
Best wishes the development team GFF
Support us on patreon  https://www.patreon.com/GameFunSPB
Contacts : email "GameFunSPB@gmail.com"; Discord  "GameFunSPB#2037"


Addon name : Item Enchantment
Addon version : 1.8
Date of creation / editing 23.01.2023
Require Components / Addons : Addons Core (UniversalSlot, UpdatedDisableAfter), Textures
Recommended Components : Item Rarity, Item Durability
Compatible projects : uMMORPG Remastered 2.38
Recommendations : Test the addon on a clean version uMMORPG without changes.
Recommended version Unity 2021.3.16
Link : http://u3d.as/1SiK

Versions for other projects:
 * uMMORPG Classic : http://u3d.as/1nE5
 * uSurvival : http://u3d.as/1X6T


Small set of Addons for uMMORPG Classic and 2D http://u3d.as/1pms
All Addons for uMMORPG Classic and 2D http://u3d.as/25bQ
All Addons for uMMORPG Remastered https://u3d.as/2AEs


                                      Installation and Configuration

1. Edit the "EquipmentItem.cs"  Script in “/Scripts/ScriptableItems/" 
    a)    Find line       public class EquipmentItem : UsableItem
          change to       public partial class EquipmentItem : UsableItem


    b)  find and comment out this lines
	     tip.Replace("{DAMAGEBONUS}", damageBonus.ToString());
         tip.Replace("{DEFENSEBONUS}", defenseBonus.ToString());


2. Edit the "ItemDropChance.cs"  Script in “/Scripts/" 
    a)    Find line       public class ItemDropChance
          change to       public partial class ItemDropChance


3. Edit the "ScriptableItem.cs"  Script in “/Scripts/" 
       a) after line       public int amount;

           add lines       public int holes;
                           public GFFAddons.RuneType[] upgradeInd;


4. Edit the "Item.cs"  Script in “/Scripts/" 
   a)before line       summoned = null;
       add lines       holes = 0;
                       upgradeInd = null;
	    

5. Edit the "Database.cs" Script in “Assets/uMMORPG/Scripts/" 
   a) after line       public int amount { get; set; }
       add lines       public int holes { get; set; }
	                   public string upgradeInd{ get; set; }


	   in void "LoadInventory" and "LoadEquipment"
   b) after line       Item item = new Item(itemData);
       add lines       item.holes = row.holes;
                       item.upgradeInd = LoadUpgradeInd(row.upgradeInd); 


       in void "SaveInventory" and "SaveEquipment"
   c) after line       amount = slot.amount,
       add lines       holes = slot.item.holes,
                       upgradeInd = SaveUpgradeInd(slot.item),


//if used origanal Inventory
6. Edit the "UIInventory.cs" Script in “ Assets/uMMORPG/Scripts/_UI "
     a) find the line    public UIInventorySlot slotPrefab;
	       replace it    public UniversalSlot slotPrefab;

     b) find the line    UIInventorySlot slot = content.GetChild(i).GetComponent<UIInventorySlot>();
	       replace it    UniversalSlot slot = content.GetChild(i).GetComponent<UniversalSlot>(); 

     c)    After line    slot.amountText.text = itemSlot.amount.ToString();
	        add lines    slot.upgradeText.text = itemSlot.item.upgradeInd != null && itemSlot.item.upgradeInd.Length > 0 ? "+" + itemSlot.item.upgradeInd.Length : "";

     d)    After line    slot.amountOverlay.SetActive(false);
	         add line    slot.upgradeText.text = "";


//if used origanal Equipment
7. Edit the "UIEquipment.cs" Script in “ Assets/uMMORPG/Scripts/_UI "
     a) find the line     public UIEquipmentSlot slotPrefab;
	       replace it     public UniversalSlot slotPrefab;

     b)    After line     public Transform content;
	         add line     public bool categories;

     g)    After line     ItemSlot itemSlot = player.equipment[i];
	         add line     slot.dragAndDropable.tag = "EquipmentSlot";

     f) find the line     slot.categoryOverlay.SetActive(player.equipmentInfo[i].requiredCategory != "");
	       replace it     slot.categoryOverlay.SetActive(categories);

	 c) find the line     UIEquipmentSlot slot = content.GetChild(i).GetComponent<UIEquipmentSlot>();
	       replace it     UniversalSlot slot = content.GetChild(i).GetComponent<UniversalSlot>(); 

     d)    After line     slot.amountText.text = itemSlot.amount.ToString();
	        add lines     slot.upgradeText.text = itemSlot.item.upgradeInd != null && itemSlot.item.upgradeInd.Length > 0 ? "+" + itemSlot.item.upgradeInd.Length : "";

     e)    After line     slot.amountOverlay.SetActive(false);
	         add line     slot.upgradeText.text = "";


8. Select the "Inventory" (Canvas\GFF Inventory) object. In the inspector
         Drag in "slot Prefab" the "SlotUniversal.prefab" (Addons\GFF Addons Core\Prefabs\)

9. Select the "Equipment" (Canvas\Equipment) object. In the inspector
		 Drag in "slot Prefab" the "SlotUniversal.prefab" (Addons\GFF Addons Core\Prefabs\)


10. Edit the "Equipment.cs"  Script in “Assets/uMMORPG/Scripts/" 
     a)   Find line       bonus += ((EquipmentItem)slot.item.data).damageBonus;
          change to       bonus += slot.item.BonusAsPercentageOfEnchantment(((EquipmentItem)slot.item.data).damageBonus, GFFAddons.RuneType.damage);

     b)   Find line       bonus += ((EquipmentItem)slot.item.data).defenseBonus;
          change to       bonus += slot.item.BonusAsPercentageOfEnchantment(((EquipmentItem)slot.item.data).defenseBonus, GFFAddons.RuneType.defense);


11. Edit all player prefabs
  a) add script "PlayerEnchantment"
  b) in Inspector in script "PlayerEnchantment" drag in field "player" this prefab
  c) in Inspector in script "PlayerEnchantment" drag in field "Data" object "Enchantment Data" from (Addons\GFF Item Enchantment \ Resources)
  d) in Inspector in script "Player" drag in field "Enchantment" this prefab
	   

12. Drag the "GFF Item Enchantment.prefab" (Addons\GFF Item Upgrade (item enchantment system)\Prefabs\) to the canvas element so canvas is the parent.


13. All items (uMMORPG\Resources\Items\Equipment)
    a) expand Runes list and add runes with which can enchant this item from folder (Addons\GFF Item Enchantment \ Resources\ GFF Gems and Runes)
    b) in field "Tool Tip" add line  "Enchantment: {UPGRADE}"


14. Edit the "MonsterInventory.cs"  Script in “Assets/uMMORPG/Scripts/" 
      find the line      slots.Add(new ItemSlot(new Item(itemChance.item)));
         replace it      {
                            Item item = new Item(itemChance.item);
                            item.holes = Random.Range(0, GFFAddons.PlayerEnchantment.maxUpgrade);
                            slots.Add(new ItemSlot(item));
                         }


15. Edit the "PlayerNpcTrading.cs"  Script in “Assets/uMMORPG/Scripts/" 
     a) before line       inventory.Add(npcItem, amount);
	       add line       npcItem.holes = npc.enchantment.amountofSlotsForEnchantmentInItemsSold;




	                                     Configuration
   1.  If you want to use the Enchant addon via Npc    
    a)   Select the npc on scene and add script "NpcEnchantment"
         - "Amount of Slots For Enchantment In Items Sold" - how many will be enchantment slots for items purchased from a merchant ()

    b) in Inspector in script "Npc" drag in field "Enchantment" this 

    c)  open "Sale Items" in script "NpcTrading" and add items from (Addons\GFF Item Enchantment \ Resources\ GFF Gems and Runes)


   2.  If you want to use the Enchant addon via Shortcuts
       - Drag the "ButtonEnchantmentShortcuts.prefab" (Addons\GFF Item Enchantment\Prefabs\) to the Canvas\Shortcuts\ShortcutsPanel\

       - Select the "Shortcuts" object. In the inspector, there are two new settings.
               Drag in "Button Enchantment" the button in Shortcuts\ShortcutsPanel\ButtonEnchantmentShortcuts

       - Edit the " UIShortcuts.cs" Script in “ Assets/uMMORPG/Scripts/_UI " 
             after line       else panel.SetActive(false); // hide
               add line       Utils.InvokeMany(typeof(UIShortcuts), this, "Update_", player);




                                      Extensions:
1. If you bought and configured our addon "Item Rarity" https://assetstore.unity.com/packages/tools/integration/item-rarity-for-ummorpg-and-ummorpg-2d-158307
   from version 1.4 - it will automatically connect and start working


2. If you bought and configured our addon "Chat Extended" 
   Edit the "PlayerEnchantment.cs"  Script in “Assets/uMMORPG/Addons/GFF Item Enchantment/Scripts/" 
    a) in two places comment this line        player.chat.OnSubmit(message);
	b) in two places uncomment this line      player.chat.OnSubmit(message, chatChannel.info);




                                      Information
1) You need to set the value for how much you can enchant an item - you can do it with a script PlayerEnchantment.cs (public static int maxUpgrade = 7;)

2) Values: a) holes - the number of holes in the item for enchanting his rune
		   b) upgrdaeIND - with which rune the item was enchanted

3) Settings in script PlayerEnchantment.cs
    *) bool NeedHoles - Are holes for enchantment necessary?
	*) bool ConsiderItemLevel - Does item level affect enchantment chance  (for example, the higher the level the harder to enchant)
	*) float DifficultyOfEnchantment - value of the base complexity of enchantment
	*) bool UseTheChanceOfRarityItem - depending on the rarity of the item, it may have its own value which is used when enchanting (DefaultBaseChance)



 4)  if you use our addon that adds amulets, rings and earrings then comment 2 lines in the script "Upgrade Partial.cs"
      a)   if (equipment[i].amount > 0) damagePercent = damagePercent + ((EquipmentItem)equipment[i].item.data).damagePercent;
      b)   if (equipment[i].amount > 0) defensePercent = defensePercent + ((EquipmentItem)equipment[i].item.data).defensePercent;



                                      How the enchantment system works